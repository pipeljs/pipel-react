# Pipel-React é¡¹ç›®æ¦‚è§ˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
pipel-react/
â”œâ”€â”€ src/                          # æºä»£ç 
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒ Hooks
â”‚   â”‚   â”œâ”€â”€ usePipel.ts          # â­ æ ¸å¿ƒ Hook - Stream è½¬ State
â”‚   â”‚   â”œâ”€â”€ useStream.ts         # åˆ›å»ºç¨³å®šçš„ Stream
â”‚   â”‚   â”œâ”€â”€ useObservable.ts     # è®¢é˜… Observable
â”‚   â”‚   â”œâ”€â”€ to$.ts               # State è½¬ Stream
â”‚   â”‚   â”œâ”€â”€ effect$.ts           # å‰¯ä½œç”¨æµ
â”‚   â”‚   â”œâ”€â”€ useSyncState.ts      # åŒå‘åŒæ­¥
â”‚   â”‚   â”œâ”€â”€ usePipelRender.ts    # æµå¼æ¸²æŸ“
â”‚   â”‚   â””â”€â”€ persistStream$.ts    # æŒä¹…åŒ–æµ
â”‚   â”œâ”€â”€ fetch/                    # HTTP è¯·æ±‚
â”‚   â”‚   â”œâ”€â”€ useFetch.ts          # â­ HTTP Hook
â”‚   â”‚   â”œâ”€â”€ createFetch.ts       # è‡ªå®šä¹‰ Fetch
â”‚   â”‚   â””â”€â”€ types.ts             # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ operators/                # æ“ä½œç¬¦
â”‚   â”‚   â””â”€â”€ index.ts             # é‡å¯¼å‡º pipeljs æ“ä½œç¬¦
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ helpers.ts           # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ index.ts                  # â­ ä¸»å…¥å£
â”‚
â”œâ”€â”€ test/                         # æµ‹è¯•
â”‚   â”œâ”€â”€ setup.ts                 # æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ usePipel.test.tsx        # usePipel æµ‹è¯•
â”‚   â””â”€â”€ useFetch.test.tsx        # useFetch æµ‹è¯•
â”‚
â”œâ”€â”€ examples/                     # ç¤ºä¾‹åº”ç”¨
â”‚   â”œâ”€â”€ basic/                   # åŸºç¡€ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ Counter.tsx          # è®¡æ•°å™¨
â”‚   â”‚   â”œâ”€â”€ SearchBox.tsx        # æœç´¢é˜²æŠ–
â”‚   â”‚   â””â”€â”€ TodoList.tsx         # å¾…åŠåˆ—è¡¨
â”‚   â”œâ”€â”€ fetch/                   # HTTP ç¤ºä¾‹
â”‚   â”‚   â””â”€â”€ UserList.tsx         # ç”¨æˆ·åˆ—è¡¨
â”‚   â”œâ”€â”€ advanced/                # é«˜çº§ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ PersistCounter.tsx   # æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ SyncStateExample.tsx # åŒå‘åŒæ­¥
â”‚   â”œâ”€â”€ App.tsx                  # ç¤ºä¾‹å…¥å£
â”‚   â”œâ”€â”€ main.tsx                 # React å…¥å£
â”‚   â””â”€â”€ index.html               # HTML æ¨¡æ¿
â”‚
â”œâ”€â”€ scripts/                      # è„šæœ¬
â”‚   â””â”€â”€ setup.sh                 # å®‰è£…è„šæœ¬
â”‚
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚
â”œâ”€â”€ package.json                  # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts                # Vite é…ç½®
â”œâ”€â”€ README.md                     # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ CHANGELOG.md                  # å˜æ›´æ—¥å¿—
â”œâ”€â”€ PROJECT_OVERVIEW.md           # æœ¬æ–‡ä»¶
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥
â””â”€â”€ .npmignore                    # npm å¿½ç•¥
```

## ğŸ¯ æ ¸å¿ƒ API ä¸€è§ˆ

### Hooks (8ä¸ª)

| Hook             | åŠŸèƒ½            | ä½¿ç”¨åœºæ™¯        |
| ---------------- | --------------- | --------------- |
| `usePipel`       | Stream â†’ State  | åŸºç¡€å“åº”å¼çŠ¶æ€  |
| `useStream`      | åˆ›å»º Stream     | éœ€è¦ç¨³å®šå¼•ç”¨    |
| `useObservable`  | è®¢é˜… Observable | è®¢é˜…æ´¾ç”Ÿæµ      |
| `to$`            | State â†’ Stream  | è½¬æ¢ç°æœ‰çŠ¶æ€    |
| `effect$`        | å‰¯ä½œç”¨          | æ—¥å¿—ã€æŒä¹…åŒ–    |
| `useSyncState`   | åŒå‘åŒæ­¥        | State â†” Stream |
| `usePipelRender` | æµå¼æ¸²æŸ“        | åŠ¨æ€ç»„ä»¶        |
| `persistStream$` | æŒä¹…åŒ–          | localStorage    |

### HTTP (2ä¸ª)

| API           | åŠŸèƒ½         | ä½¿ç”¨åœºæ™¯ |
| ------------- | ------------ | -------- |
| `useFetch`    | HTTP è¯·æ±‚    | æ•°æ®è·å– |
| `createFetch` | è‡ªå®šä¹‰ Fetch | ç»Ÿä¸€é…ç½® |

### æ“ä½œç¬¦ (30+)

ä» `pipeljs` é‡å¯¼å‡ºæ‰€æœ‰æ“ä½œç¬¦ï¼š

- **è½¬æ¢**: map, scan, reduce
- **è¿‡æ»¤**: filter, distinctUntilChanged, take, skip
- **ç»„åˆ**: merge, concat, promiseAll, promiseRace
- **æ—¶é—´**: debounce, throttle, delay, timeout
- **é”™è¯¯**: catchError, retry
- **å·¥å…·**: tap, share, startWith, endWith

## ğŸ”„ æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React     â”‚
â”‚   State     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ to$()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     pipe()      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Stream    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Operators  â”‚
â”‚             â”‚                 â”‚  (map, etc) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚
       â”‚ usePipel()                    â”‚
       â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React     â”‚                â”‚  Observable â”‚
â”‚   State     â”‚                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                      â”‚ useObservable()
                                      â–¼
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚   React     â”‚
                               â”‚   State     â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¡ ä½¿ç”¨æ¨¡å¼

### æ¨¡å¼ 1: åŸºç¡€å“åº”å¼

```tsx
const [value, value$] = usePipel(0)
// value: React State
// value$: Stream (å¯ä»¥ .next() æ›´æ–°)
```

### æ¨¡å¼ 2: æ“ä½œç¬¦é“¾

```tsx
const [input, input$] = usePipel('')

const result = useObservable(input$.pipe(debounce(300), map(transform), filter(validate)))
```

### æ¨¡å¼ 3: HTTP è¯·æ±‚

```tsx
const { data, loading, error } = useFetch('/api/data', {
  immediate: true,
})
```

### æ¨¡å¼ 4: æŒä¹…åŒ–

```tsx
const theme$ = persistStream$('dark', { key: 'theme' })
const [theme] = usePipel(theme$)
```

### æ¨¡å¼ 5: åŒå‘åŒæ­¥

```tsx
const [value, setValue, value$] = useSyncState(0)
// setValue(10) å’Œ value$.next(10) éƒ½ä¼šåŒæ­¥
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

- âœ… usePipel - åˆ›å»ºã€æ›´æ–°ã€æ¸…ç†
- âœ… useFetch - è¯·æ±‚ã€é”™è¯¯ã€é‡è¯•

### é›†æˆæµ‹è¯•

- â³ å¤šä¸ª Hook ç»„åˆä½¿ç”¨
- â³ å¤æ‚æ“ä½œç¬¦é“¾
- â³ é”™è¯¯è¾¹ç•Œ

### E2E æµ‹è¯•

- â³ å®Œæ•´åº”ç”¨æµç¨‹
- â³ æ€§èƒ½æµ‹è¯•

## ğŸ“Š æ€§èƒ½è€ƒè™‘

### ä¼˜åŒ–ç‚¹

1. **å¼•ç”¨ç¨³å®š**: ä½¿ç”¨ `useRef` ä¿æŒ Stream å¼•ç”¨
2. **é¿å…é‡æ¸²æŸ“**: åªåœ¨å€¼å˜åŒ–æ—¶æ›´æ–°
3. **è‡ªåŠ¨æ¸…ç†**: ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè®¢é˜…
4. **æ‰¹é‡æ›´æ–°**: React 18 è‡ªåŠ¨æ‰¹å¤„ç†

### æ€§èƒ½æŒ‡æ ‡

- åˆå§‹åŒ–: < 1ms
- æ›´æ–°å»¶è¿Ÿ: < 5ms
- å†…å­˜å ç”¨: æœ€å°åŒ–

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### 1. å¼€å‘

```bash
pnpm dev          # è¿è¡Œç¤ºä¾‹
pnpm test         # è¿è¡Œæµ‹è¯•
pnpm test:ui      # æµ‹è¯• UI
```

### 2. æ„å»º

```bash
pnpm build        # æ„å»ºåº“
pnpm lint         # ä»£ç æ£€æŸ¥
```

### 3. å‘å¸ƒ

```bash
pnpm version patch/minor/major
pnpm publish
```

## ğŸ“š å­¦ä¹ è·¯å¾„

### åˆå­¦è€…

1. é˜…è¯» README.md
2. è¿è¡Œ Counter ç¤ºä¾‹
3. å°è¯• SearchBox ç¤ºä¾‹
4. ç†è§£ usePipel åŸç†

### è¿›é˜¶

1. å­¦ä¹ æ“ä½œç¬¦ç»„åˆ
2. ä½¿ç”¨ useFetch
3. å®ç°è‡ªå®šä¹‰ Hook
4. æ€§èƒ½ä¼˜åŒ–

### é«˜çº§

1. æºç é˜…è¯»
2. è´¡çŒ®ä»£ç 
3. æ‰©å±•åŠŸèƒ½
4. ç”Ÿæ€å»ºè®¾

## ğŸ¨ è®¾è®¡åŸåˆ™

### 1. ç®€å•ä¼˜å…ˆ

- API è®¾è®¡ç®€æ´
- å­¦ä¹ æ›²çº¿å¹³ç¼“
- é»˜è®¤è¡Œä¸ºåˆç†

### 2. ç±»å‹å®‰å…¨

- å®Œæ•´çš„ TypeScript æ”¯æŒ
- ç±»å‹æ¨å¯¼å‡†ç¡®
- ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥

### 3. æ€§èƒ½ä¼˜å…ˆ

- æœ€å°åŒ–é‡æ¸²æŸ“
- è‡ªåŠ¨æ¸…ç†èµ„æº
- å†…å­˜å ç”¨ä½

### 4. å¯æ‰©å±•æ€§

- æ”¯æŒè‡ªå®šä¹‰æ“ä½œç¬¦
- æ”¯æŒæ’ä»¶ç³»ç»Ÿ
- æ˜“äºé›†æˆ

## ğŸ”— ç›¸å…³èµ„æº

- [PipelJS æ ¸å¿ƒåº“](../pipel)
- [Pipel-Vue](../pipel-vue)
- [è®¾è®¡æ–‡æ¡£](./pipel-reactè®¾è®¡æ–¹æ¡ˆ.md)
- [å®æ–½æ€»ç»“](./pipel-reactå®æ–½æ€»ç»“.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤ PR

1. Fork é¡¹ç›®
2. åˆ›å»ºåˆ†æ”¯
3. ç¼–å†™ä»£ç å’Œæµ‹è¯•
4. æäº¤ PR

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript
- æ·»åŠ  JSDoc æ³¨é‡Š
- ç¼–å†™å•å…ƒæµ‹è¯•
- éµå¾ª ESLint è§„åˆ™

### æäº¤ä¿¡æ¯

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ›´æ–°æ–‡æ¡£
test: æ·»åŠ æµ‹è¯•
refactor: é‡æ„ä»£ç 
```

## ğŸ“ å¾…åŠäº‹é¡¹

### çŸ­æœŸ (v0.1.x)

- [x] æ ¸å¿ƒ Hooks å®ç°
- [x] useFetch å®ç°
- [x] åŸºç¡€æµ‹è¯•
- [x] ç¤ºä¾‹åº”ç”¨
- [ ] å®Œå–„æµ‹è¯•è¦†ç›–
- [ ] æ€§èƒ½ä¼˜åŒ–

### ä¸­æœŸ (v0.2.x)

- [ ] React 18 ç‰¹æ€§é›†æˆ
- [ ] DevTools æ’ä»¶
- [ ] æ›´å¤šç¤ºä¾‹
- [ ] æ€§èƒ½ç›‘æ§

### é•¿æœŸ (v1.0.x)

- [ ] Next.js é›†æˆ
- [ ] React Native æ”¯æŒ
- [ ] SSR ä¼˜åŒ–
- [ ] ç”Ÿæ€å»ºè®¾

## ğŸ‰ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…ä¾èµ–
cd pipel-react
pnpm install

# 2. è¿è¡Œç¤ºä¾‹
pnpm dev

# 3. è¿è¡Œæµ‹è¯•
pnpm test

# 4. æ„å»º
pnpm build
```

---

**Happy Coding! ğŸš€**
